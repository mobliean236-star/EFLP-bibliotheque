<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“š BibliothÃ¨que EFLP</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .card { padding: 15px; border: 1px solid #ccc; margin-bottom: 20px; border-radius: 8px; }
    input, select { margin: 5px 0; padding: 8px; width: 100%; }
    button { padding: 10px 15px; margin-top: 10px; }
    .hidden { display: none; }
    ul { padding-left: 0; }
    li { list-style: none; background: #f2f2f2; margin: 5px 0; padding: 8px; border-radius: 5px; }
  </style>
</head>
<body>

  <h1>ðŸ“š BibliothÃ¨que EFLP</h1>

  <!-- LOGIN PROFESSEUR -->
  <div id="login" class="card">
    <h2>Connexion Professeur</h2>
    <input type="text" id="idProf" placeholder="Identifiant professeur">
    <input type="password" id="mdpProf" placeholder="Mot de passe">
    <button onclick="connexion()">Se connecter</button>
  </div>

  <!-- INTERFACE BIBLIOTHEQUE -->
  <div id="app" class="hidden">

    <h2 id="bonjour"></h2>

    <div class="card">
      <h3>Ajouter un livre</h3>
      <input type="text" id="titre" placeholder="Titre du livre">
      <input type="text" id="auteur" placeholder="Auteur">
      <select id="langue">
        <option>Lao</option>
        <option>FranÃ§ais</option>
        <option>Anglais</option>
      </select>
      <select id="classe">
        <option>CP</option>
        <option>CE1</option>
        <option>CE2</option>
        <option>CM1</option>
        <option>CM2</option>
      </select>
      <button onclick="ajouterLivre()">Ajouter Livre</button>
    </div>

    <h3>ðŸ“– Livres de votre classe :</h3>
    <ul id="listeLivres"></ul>

    <button onclick="deconnexion()" style="margin-top:20px; background:red; color:white;">Se dÃ©connecter</button>
  </div>

<script>
/* =======================
   PROFESSEURS ENREGISTRÃ‰S
   ======================= */
const professeurs = [
  { id: "mmeLao", mdp: "1234", classe: "CP" },
  { id: "mJean", mdp: "abcd", classe: "CE1" },
  { id: "mmeJulie", mdp: "pass", classe: "CM2" }
];

/* =======================
   CONNEXION PROFESSEUR
   ======================= */
function connexion() {
  const id = document.getElementById("idProf").value;
  const mdp = document.getElementById("mdpProf").value;

  const prof = professeurs.find(p => p.id === id && p.mdp === mdp);

  if (!prof) {
    alert("Identifiant ou mot de passe incorrect.");
    return;
  }

  localStorage.setItem("profConnecte", JSON.stringify(prof));
  afficherApp();
}

/* =======================
   DÃ‰CONNEXION
   ======================= */
function deconnexion() {
  localStorage.removeItem("profConnecte");
  location.reload();
}

/* =======================
   CHARGER INTERFACE
   ======================= */
function afficherApp() {
  const prof = JSON.parse(localStorage.getItem("profConnecte"));
  if (!prof) return;

  document.getElementById("login").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");

  document.getElementById("bonjour").textContent =
    "Bonjour " + prof.id + " â€” Classe : " + prof.classe;

  afficherLivres();
}

/* =======================
   STOCKAGE DES LIVRES
   ======================= */
function chargerLivres() {
  return JSON.parse(localStorage.getItem("livres") || "[]");
}

function sauvegarderLivres(livres) {
  localStorage.setItem("livres", JSON.stringify(livres));
}

/* =======================
   AJOUTER UN LIVRE
   ======================= */
function ajouterLivre() {
  const prof = JSON.parse(localStorage.getItem("profConnecte"));
  const titre = document.getElementById("titre").value;
  const auteur = document.getElementById("auteur").value;
  const langue = document.getElementById("langue").value;
  const classe = document.getElementById("classe").value;

  if (!titre || !auteur) {
    alert("Veuillez remplir tous les champs.");
    return;
  }

  const livres = chargerLivres();
  livres.push({
    titre, auteur, langue, classe,
    prof: prof.id
  });

  sauvegarderLivres(livres);
  afficherLivres();

  document.getElementById("titre").value = "";
  document.getElementById("auteur").value = "";
}

/* =======================
   AFFICHER LIVRES DU PROF
   ======================= */
function afficherLivres() {
  const liste = document.getElementById("listeLivres");
  liste.innerHTML = "";

  const prof = JSON.parse(localStorage.getItem("profConnecte"));
  const livres = chargerLivres().filter(l => l.prof === prof.id);

  livres.forEach(livre => {
    const li = document.createElement("li");
    li.textContent =
      `${livre.titre} â€” ${livre.auteur} (${livre.langue}) â€” Classe : ${livre.classe}`;
    liste.appendChild(li);
  });
}

/* CHARGER SI PROF DÃ‰JÃ€ CONNECTÃ‰ */
afficherApp();
</script>

</body>
</html>

